{"ast":null,"code":"var _jsxFileName = \"/Users/davidwang/Desktop/githubstuff/LynbrookCovid19App/src/components2/GoogleSheetAPI.js\";\nimport React, { useState, useEffect } from 'react';\nimport ListRender from './ListRender';\nimport axios from 'axios';\n\nconst GoogleSheetAPI = props => {\n  const [profiles, setProfiles] = useState([]);\n  useEffect(() => {\n    const getURL = async () => {\n      if (props.user) {\n        const url = await axios.get(\"http://localhost:7000/api/users/geturl/\" + props.user.email).then(response => {\n          console.log(response.data);\n          return response.data.toString();\n        });\n        return await url;\n      }\n\n      return \"\";\n    };\n\n    const googleJSON = async googleSheetURL => {\n      console.log(\"hi\");\n      const startIndex = 39;\n      const endIndex = googleSheetURL.indexOf(\"edit\") - 1;\n      const firstURLHalf = \"https://spreadsheets.google.com/feeds/worksheets/\";\n      const secondURLHalf = \"/public/basic?alt=json\";\n      const resultURL = firstURLHalf + googleSheetURL.substring(startIndex, endIndex) + secondURLHalf;\n      const {\n        data\n      } = await axios.get(resultURL);\n      return await data.feed.entry[0].id.$t;\n    };\n\n    const finalGoogleJSON = async (googleTerm, googleSheetURL) => {\n      const starInd = googleTerm.indexOf(\"basic\");\n      const wkstID = googleTerm.substring(starInd + 6);\n      const finalFirstHalf = \"https://spreadsheets.google.com/feeds/list/\";\n      const finalSecondHalf = \"/public/values?alt=json\";\n      const finalURL = finalFirstHalf + googleSheetURL.substring(39, googleSheetURL.indexOf(\"edit\") - 1) + \"/\" + wkstID + finalSecondHalf;\n      const {\n        data\n      } = await axios.get(finalURL);\n      console.log(\"this is the final google term\");\n      return await data;\n    };\n\n    const setter = async final => {\n      console.log(final.feed.entry);\n      setProfiles(final.feed.entry.reverse());\n    };\n\n    const asyncRunner = async () => {\n      const zerothThing = await getURL();\n      const firstThing = await googleJSON(zerothThing);\n      const secondThing = await finalGoogleJSON(firstThing, zerothThing);\n      await setter(secondThing);\n    };\n\n    asyncRunner();\n  }, []);\n  return /*#__PURE__*/React.createElement(ListRender, {\n    profiles: profiles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default GoogleSheetAPI;","map":{"version":3,"sources":["/Users/davidwang/Desktop/githubstuff/LynbrookCovid19App/src/components2/GoogleSheetAPI.js"],"names":["React","useState","useEffect","ListRender","axios","GoogleSheetAPI","props","profiles","setProfiles","getURL","user","url","get","email","then","response","console","log","data","toString","googleJSON","googleSheetURL","startIndex","endIndex","indexOf","firstURLHalf","secondURLHalf","resultURL","substring","feed","entry","id","$t","finalGoogleJSON","googleTerm","starInd","wkstID","finalFirstHalf","finalSecondHalf","finalURL","setter","final","reverse","asyncRunner","zerothThing","firstThing","secondThing"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport ListRender from './ListRender'\nimport axios from 'axios';\nconst GoogleSheetAPI = (props) => {\n    const [profiles,setProfiles] = useState([]);\n    useEffect(() => {       \n      const getURL = async () => {\n        if (props.user) {\n          const url = await axios.get(\"http://localhost:7000/api/users/geturl/\" + props.user.email).then(response => {\n            console.log(response.data)\n            return response.data.toString()}); \n          return await url; \n        }\n        return \"\";\n      }\n\n        \n      const googleJSON = async (googleSheetURL) => {\n        console.log(\"hi\");\n        const startIndex = 39;\n        const endIndex = googleSheetURL.indexOf(\"edit\")-1;\n        const firstURLHalf = \"https://spreadsheets.google.com/feeds/worksheets/\";\n        const secondURLHalf = \"/public/basic?alt=json\";\n        const resultURL = firstURLHalf + googleSheetURL.substring(startIndex, endIndex) + secondURLHalf;\n        const {data} = await axios.get(resultURL);\n        return await data.feed.entry[0].id.$t;\n      };\n      const finalGoogleJSON = async (googleTerm, googleSheetURL) => {\n        const starInd = googleTerm.indexOf(\"basic\");\n        const wkstID = googleTerm.substring(starInd+6);\n        const finalFirstHalf = \"https://spreadsheets.google.com/feeds/list/\";\n        const finalSecondHalf = \"/public/values?alt=json\";\n        const finalURL = finalFirstHalf + googleSheetURL.substring(39, googleSheetURL.indexOf(\"edit\")-1) + \"/\" + wkstID + finalSecondHalf;\n        const {data} = await axios.get(finalURL);\n        console.log(\"this is the final google term\")\n        return await data;\n      };\n      const setter = async(final) => {\n        console.log(final.feed.entry);\n        setProfiles(final.feed.entry.reverse());\n      }\n      const asyncRunner = async () => {\n        const zerothThing = await getURL();\n        const firstThing = await googleJSON(zerothThing);\n        const secondThing = await finalGoogleJSON(firstThing, zerothThing);\n        await setter(secondThing);\n      }    \n      asyncRunner();\n      },[]);\n      return (\n        <ListRender profiles={profiles}></ListRender>\n      )\n}\nexport default GoogleSheetAPI;"]},"metadata":{},"sourceType":"module"}