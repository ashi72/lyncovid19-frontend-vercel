{"ast":null,"code":"var _jsxFileName = \"/Users/davidwang/Desktop/githubstuff/LynbrookCovid19App/src/components2/SearchBar.js\";\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Select from './Select2';\nimport { withAuthenticationRequired } from \"@auth0/auth0-react\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    '& > *': {\n      margin: theme.spacing(1),\n      width: '32vw'\n    },\n    float: \"left\",\n    position: \"relative\",\n    top: \"13px\"\n  },\n  center: {\n    display: \"flex\",\n    justifyContent: \"center\"\n  },\n  container: {\n    marginBottom: \"100px\"\n  },\n  flexboxcontainer: {\n    display: \"flex\",\n    flexDirection: \"row\"\n  }\n}));\nexport default withAuthenticationRequired(function SearchBar(props) {\n  const classes = useStyles();\n  const [term, setTerm] = useState('');\n  const [results, setResults] = useState(props.profiles);\n  useEffect(() => {\n    const removeDuplicates = (arr, prop) => arr.reduce((accumulator, currentValue) => {\n      if (!accumulator.find(obj => obj[prop].$t === currentValue[prop].$t)) {\n        accumulator.push(currentValue);\n      }\n\n      return accumulator;\n    }, []);\n\n    if (!term) {\n      setResults(removeDuplicates(props.profiles, \"gsx$studentid\"));\n    }\n\n    const search = async () => {\n      if (/\\d+/g.test(term)) {\n        const data = props.profiles.filter(profile => profile.gsx$studentid.$t.toString().startsWith(term));\n        setResults(removeDuplicates(data, \"gsx$studentid\"));\n      } else {\n        console.log(props.profiles);\n        const data = props.profiles.filter(profile => profile.gsx$namefirstlast.$t.toLowerCase().startsWith(term.toLowerCase()));\n        const data2 = props.profiles.filter(profile => profile.gsx$namefirstlast.$t.substring(profile.gsx$namefirstlast.$t.indexOf(\" \") + 1, profile.gsx$namefirstlast.$t.length).toLowerCase().startsWith(term.toLowerCase()));\n        setResults(removeDuplicates(data.concat(data2), \"gsx$studentid\"));\n      }\n    };\n\n    if (term) {\n      search();\n    } else {\n      const timeoutId = setTimeout(() => {\n        if (term) {\n          search();\n        }\n      }, 500);\n      return () => {\n        clearTimeout(timeoutId);\n      };\n    }\n  }, [term, props.profiles]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.center,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 39\n    }\n  }, \"Student List\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.flexboxcontainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.root,\n    noValidate: true,\n    autoComplete: \"off\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-search-small\",\n    label: \"Search...\",\n    variant: \"outlined\",\n    size: \"small\",\n    helperText: \"Search by name or student ID\",\n    onChange: e => setTerm(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Select, {\n    profiles: results,\n    onSearch: props.onSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  })));\n});","map":{"version":3,"sources":["/Users/davidwang/Desktop/githubstuff/LynbrookCovid19App/src/components2/SearchBar.js"],"names":["React","useState","useEffect","makeStyles","TextField","Select","withAuthenticationRequired","useStyles","theme","root","margin","spacing","width","float","position","top","center","display","justifyContent","container","marginBottom","flexboxcontainer","flexDirection","SearchBar","props","classes","term","setTerm","results","setResults","profiles","removeDuplicates","arr","prop","reduce","accumulator","currentValue","find","obj","$t","push","search","test","data","filter","profile","gsx$studentid","toString","startsWith","console","log","gsx$namefirstlast","toLowerCase","data2","substring","indexOf","length","concat","timeoutId","setTimeout","clearTimeout","handleSubmit","e","preventDefault","target","value","onSearch"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Select from './Select2';\nimport {withAuthenticationRequired} from \"@auth0/auth0-react\";\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& > *': {\n      margin: theme.spacing(1),\n      width: '32vw',\n    },\n    float: \"left\",\n    position: \"relative\",\n    top: \"13px\"\n  },\n  center: {\n    display: \"flex\",\n    justifyContent: \"center\"\n  },\n  container: {\n    marginBottom: \"100px\",\n  },\n  flexboxcontainer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n  }\n}));\nexport default withAuthenticationRequired(function SearchBar(props) {\n  const classes = useStyles();\n  const [term, setTerm] = useState('');\n  const [results, setResults] = useState(props.profiles);\n  useEffect(() => {\n    const removeDuplicates = (arr, prop) => arr.reduce((accumulator, currentValue) => {\n      if(!accumulator.find(obj => obj[prop].$t === currentValue[prop].$t)){\n        accumulator.push(currentValue);\n      }\n      return accumulator;\n    }, [])\n    if (!term) {\n      setResults(removeDuplicates(props.profiles, \"gsx$studentid\"));\n    }\n    const search = async () => {\n      if (/\\d+/g.test(term)) {\n        const data = props.profiles.filter(profile => profile.gsx$studentid.$t.toString().startsWith(term));\n        setResults(removeDuplicates(data, \"gsx$studentid\"));\n      } else {\n        console.log(props.profiles);\n        const data = props.profiles.filter(profile => profile.gsx$namefirstlast.$t.toLowerCase().startsWith(term.toLowerCase()));\n        const data2 = props.profiles.filter(profile => profile.gsx$namefirstlast.$t.substring(profile.gsx$namefirstlast.$t.indexOf(\" \") + 1, profile.gsx$namefirstlast.$t.length).toLowerCase().startsWith(term.toLowerCase()));\n        setResults(removeDuplicates(data.concat(data2), \"gsx$studentid\"));\n      }\n    }\n    if (term) {\n      search();\n    } else {\n      const timeoutId = setTimeout(() => {\n        if (term) {\n          search();\n        }\n      }, 500)\n      return () => {\n        clearTimeout(timeoutId);\n      };\n    }\n  }, [term, props.profiles]);\n  const handleSubmit = (e) => {\n    e.preventDefault();\n  }\n  return (\n    <div className = {classes.container}>\n      <div className={classes.center}><h1>Student List</h1></div>\n      <div className = {classes.flexboxcontainer}>\n        <form className={classes.root} noValidate autoComplete=\"off\" onSubmit={handleSubmit}>\n          <TextField \n            id=\"outlined-search-small\"\n            label=\"Search...\"\n            variant = \"outlined\"\n            size = \"small\"\n            helperText=\"Search by name or student ID\"\n            onChange = {e => setTerm(e.target.value)}\n          />\n        </form>\n        <Select profiles = {results} onSearch={props.onSearch}/>\n      </div>\n    </div>\n  );\n})"]},"metadata":{},"sourceType":"module"}